<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cold Snap Admin Console</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 20px; }
    header { display:flex; justify-content:space-between; align-items:center; }
    h1 { font-size: 20px; margin: 0 0 12px; }
    input, select, textarea { padding: 6px 8px; border: 1px solid #ccc; border-radius: 6px; width: 100%; }
    label { font-size: 12px; color:#333; }
    .row { display: grid; grid-template-columns: repeat(12, 1fr); gap: 12px; margin-bottom: 12px; }
    .col-4 { grid-column: span 4; }
    .col-6 { grid-column: span 6; }
    .col-8 { grid-column: span 8; }
    .col-12 { grid-column: span 12; }
    .card { border:1px solid #e5e7eb; border-radius:8px; padding:12px; margin-bottom: 16px; }
    .actions { display:flex; gap:8px; }
    button { padding: 8px 12px; border:1px solid #999; background:#fff; border-radius:6px; cursor:pointer; }
    pre { background: #f6f8fa; padding: 10px; border-radius: 6px; overflow: auto; max-height: 240px; }
  </style>
  <script defer src="/console/app.js"></script>
</head>
<body>
  <header>
    <h1>Cold Snap Admin Console</h1>
    <div>
      <label>Admin Token</label>
      <input id="token" placeholder="ADMIN_TOKEN" />
    </div>
  </header>

  <div class="row">
    <div class="col-6">
      <div class="card">
        <h3>Sources</h3>
        <div class="row">
          <div class="col-6"><label>Name</label><input id="src-name" placeholder="my-source" /></div>
          <div class="col-6"><label>Max Body Bytes</label><input id="src-max" type="number" value="1048576" /></div>
          <div class="col-12"><label>IP Allow CIDRs (comma separated)</label><input id="src-cidrs" placeholder="10.0.0.0/8, 192.168.0.0/16" /></div>
        </div>
        <div class="actions"><button id="create-source">Create Source</button><button id="list-sources">List Sources</button></div>
        <pre id="sources-out"></pre>
      </div>
    </div>
    <div class="col-6">
      <div class="card">
        <h3>Destinations</h3>
        <div class="row">
          <div class="col-6"><label>Name</label><input id="dst-name" placeholder="my-destination" /></div>
          <div class="col-6"><label>URL</label><input id="dst-url" placeholder="https://example.com/hooks" /></div>
          <div class="col-6"><label>Max RPS</label><input id="dst-rps" type="number" step="0.1" value="5.0" /></div>
          <div class="col-6"><label>Burst</label><input id="dst-burst" type="number" value="10" /></div>
          <div class="col-6"><label>Max Inflight</label><input id="dst-inflight" type="number" value="5" /></div>
          <div class="col-6"><label>Append Path</label><select id="dst-append"><option value="false">false</option><option value="true">true</option></select></div>
          <div class="col-12"><label>Headers (JSON)</label><textarea id="dst-headers" rows="3">{"X-App":"ColdSnap"}</textarea></div>
        </div>
        <div class="actions"><button id="create-dst">Create Destination</button><button id="list-dst">List Destinations</button></div>
        <pre id="dst-out"></pre>
      </div>
    </div>
  </div>

  <div class="card">
    <h3>Routes</h3>
    <div class="row">
      <div class="col-4"><label>Source Name</label><input id="rt-src" placeholder="my-source" /></div>
      <div class="col-4"><label>Destination Name</label><input id="rt-dst" placeholder="my-destination" /></div>
      <div class="col-4"><label>Content-Type LIKE</label><input id="rt-ct" placeholder="application/json%" /></div>
      <div class="col-4"><label>Order</label><input id="rt-ord" type="number" value="0" /></div>
    </div>
    <div class="actions"><button id="create-rt">Create Route</button><button id="list-rt">List Routes</button></div>
    <pre id="rt-out"></pre>
  </div>

  <div class="row">
    <div class="col-6">
      <div class="card">
        <h3>Test Ingest</h3>
        <div class="row">
          <div class="col-6"><label>Source</label><select id="ti-source"></select></div>
          <div class="col-6"><label>Method</label><select id="ti-method"><option>POST</option><option>PUT</option><option>PATCH</option></select></div>
          <div class="col-12"><label>Path (appended after /ingest/{token})</label><input id="ti-path" value="/" /></div>
          <div class="col-12"><label>Headers (JSON)</label><textarea id="ti-headers" rows="3">{"Content-Type":"application/json"}</textarea></div>
          <div class="col-12"><label>Body</label><textarea id="ti-body" rows="5">{"hello":"world"}</textarea></div>
        </div>
        <div class="actions"><button id="ti-send">Send</button></div>
        <pre id="ti-out"></pre>
      </div>
    </div>
    <div class="col-6">
      <div class="card">
        <h3>Events</h3>
        <div class="row">
          <div class="col-8"><label>Source</label><select id="ev-source"></select></div>
          <div class="col-4"><label>Limit</label><input id="ev-limit" type="number" value="20"/></div>
        </div>
        <div class="actions"><button id="ev-load">Load Events</button></div>
        <div id="ev-list"></div>
      </div>
    </div>
  </div>

</body>
</html>
